"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,o){for(var n=0;n<o.length;n++){var s=o[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,(i=s.key,u=void 0,u=function(t,o){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,o||"default");if("object"!==e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(i,"string"),"symbol"===e(u)?u:String(u)),s)}var i,u}export var MenuButtonLinks=function(){function e(t,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domNode=t,this.openMenu=o,this.closeMenu=n,this.openButtonNode=t.querySelector(".burger_open"),this.closeButtonNode=t.querySelector(".burger_close"),this.menuContainerNode=t.querySelector(".menu"),this.menuNode=this.menuContainerNode.querySelector('[role="menu"]'),this.menuitemNodes=[],this.firstMenuitem=!1,this.lastMenuitem=!1,this.firstChars=[],this.events=!1;for(var s=t.querySelectorAll('[role="menuitem"]'),i=0;i<s.length;i++){var u=s[i];this.menuitemNodes.push(u),u.tabIndex=-1,this.firstChars.push(u.textContent.trim()[0].toLowerCase()),this.firstMenuitem||(this.firstMenuitem=u),this.lastMenuitem=u}this.onButtonKeydown=this.onButtonKeydown.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.onMenuitemKeydown=this.onMenuitemKeydown.bind(this),this.onMenuitemMouseover=this.onMenuitemMouseover.bind(this),this.onFocusin=this.onFocusin.bind(this),this.onFocusout=this.onFocusout.bind(this),this.onBackgroundMousedown=this.onBackgroundMousedown.bind(this)}var o,n,s;return o=e,(n=[{key:"addEvents",value:function(){this.openButtonNode.addEventListener("keydown",this.onButtonKeydown),this.openButtonNode.addEventListener("click",this.onButtonClick),this.closeButtonNode.addEventListener("keydown",this.onButtonKeydown),this.closeButtonNode.addEventListener("click",this.onButtonClick);for(var e=this.domNode.querySelectorAll('[role="menuitem"]'),t=0;t<e.length;t++)this.menuitemNodes[t].addEventListener("keydown",this.onMenuitemKeydown),this.menuitemNodes[t].addEventListener("mouseover",this.onMenuitemMouseover);this.domNode.addEventListener("focusin",this.onFocusin),this.domNode.addEventListener("focusout",this.onFocusout),window.addEventListener("mousedown",this.onBackgroundMousedown,!0),this.events=!0}},{key:"removeEvents",value:function(){this.openButtonNode.removeEventListener("keydown",this.onButtonKeydown),this.openButtonNode.removeEventListener("click",this.onButtonClick),this.closeButtonNode.removeEventListener("keydown",this.onButtonKeydown),this.closeButtonNode.removeEventListener("click",this.onButtonClick);for(var e=this.domNode.querySelectorAll('[role="menuitem"]'),t=0;t<e.length;t++)this.menuitemNodes[t].removeEventListener("keydown",this.onMenuitemKeydown),this.menuitemNodes[t].removeEventListener("mouseover",this.onMenuitemMouseover);this.domNode.removeEventListener("focusin",this.onFocusin),this.domNode.removeEventListener("focusout",this.onFocusout),window.removeEventListener("mousedown",this.onBackgroundMousedown),this.events=!1}},{key:"setFocusToMenuitem",value:function(e){this.menuitemNodes.forEach((function(t){t===e?(t.tabIndex=0,e.focus()):t.tabIndex=-1}))}},{key:"setFocusToFirstMenuitem",value:function(){this.setFocusToMenuitem(this.firstMenuitem)}},{key:"setFocusToLastMenuitem",value:function(){this.setFocusToMenuitem(this.lastMenuitem)}},{key:"setFocusToPreviousMenuitem",value:function(e){var t,o;return e===this.firstMenuitem?t=this.lastMenuitem:(o=this.menuitemNodes.indexOf(e),t=this.menuitemNodes[o-1]),this.setFocusToMenuitem(t),t}},{key:"setFocusToNextMenuitem",value:function(e){var t,o;return e===this.lastMenuitem?t=this.firstMenuitem:(o=this.menuitemNodes.indexOf(e),t=this.menuitemNodes[o+1]),this.setFocusToMenuitem(t),t}},{key:"setFocusByFirstCharacter",value:function(e,t){var o,n;t.length>1||(t=t.toLowerCase(),(o=this.menuitemNodes.indexOf(e)+1)>=this.menuitemNodes.length&&(o=0),-1===(n=this.firstChars.indexOf(t,o))&&(n=this.firstChars.indexOf(t,0)),n>-1&&this.setFocusToMenuitem(this.menuitemNodes[n]))}},{key:"getIndexFirstChars",value:function(e,t){for(var o=e;o<this.firstChars.length;o++)if(t===this.firstChars[o])return o;return-1}},{key:"openPopup",value:function(){this.openMenu(this.menuContainerNode),this.openButtonNode.setAttribute("aria-expanded","true"),this.closeButtonNode.setAttribute("aria-expanded","true"),this.menuNode.setAttribute("aria-labelledby",this.closeButtonNode.id)}},{key:"closePopup",value:function(){this.isOpen()&&(this.closeMenu(this.menuContainerNode),this.openButtonNode.removeAttribute("aria-expanded"),this.closeButtonNode.removeAttribute("aria-expanded"),this.menuNode.setAttribute("aria-labelledby",this.openButtonNode.id),this.menuitemNodes.forEach((function(e){return e.tabIndex=-1})))}},{key:"isOpen",value:function(){return"true"===this.openButtonNode.getAttribute("aria-expanded")}},{key:"onFocusin",value:function(){this.domNode.classList.add("focus")}},{key:"onFocusout",value:function(){this.domNode.classList.remove("focus")}},{key:"onButtonKeydown",value:function(e){var t=!1;switch(e.key){case" ":case"Enter":case"ArrowDown":case"Down":this.openPopup(),this.setFocusToFirstMenuitem(),t=!0;break;case"Esc":case"Escape":this.closePopup(),this.openButtonNode.focus(),t=!0;break;case"Up":case"ArrowUp":this.openPopup(),this.setFocusToLastMenuitem(),t=!0}t&&(e.stopPropagation(),e.preventDefault())}},{key:"onButtonClick",value:function(e){this.isOpen()?(this.closePopup(),this.openButtonNode.focus()):(this.openPopup(),this.setFocusToFirstMenuitem()),e.stopPropagation(),e.preventDefault()}},{key:"onMenuitemKeydown",value:function(e){if(!(window.innerWidth>1024)){var t=e.currentTarget,o=e.key,n=!1;if(!(e.ctrlKey||e.altKey||e.metaKey)){if(e.shiftKey)s(o)&&(this.setFocusByFirstCharacter(t,o),n=!0),"Tab"===e.key&&(this.openButtonNode.focus(),this.closePopup(),n=!0);else switch(o){case" ":window.location.href=t.href;break;case"Esc":case"Escape":this.closePopup(),this.openButtonNode.focus(),n=!0;break;case"Up":case"ArrowUp":this.setFocusToPreviousMenuitem(t),n=!0;break;case"ArrowDown":case"Down":this.setFocusToNextMenuitem(t),n=!0;break;case"Home":case"PageUp":this.setFocusToFirstMenuitem(),n=!0;break;case"End":case"PageDown":this.setFocusToLastMenuitem(),n=!0;break;case"Tab":this.openButtonNode.focus(),this.closePopup();break;default:s(o)&&(this.setFocusByFirstCharacter(t,o),n=!0)}n&&(e.stopPropagation(),e.preventDefault())}}function s(e){return 1===e.length&&e.match(/\S/)}}},{key:"onMenuitemMouseover",value:function(e){e.currentTarget.focus()}},{key:"onBackgroundMousedown",value:function(e){this.domNode.contains(e.target)||this.isOpen()&&(this.closePopup(),this.openButtonNode.focus())}}])&&t(o.prototype,n),s&&t(o,s),Object.defineProperty(o,"prototype",{writable:!1}),e}();