import{MenuButtonLinks as e}from"./scripts/wai-aria-menu.js";var t=getComputedStyle(document.body),r=parseInt(t.getPropertyValue("--breakpoint-s"));r=Number.isNaN(r)?650:r;var n=window.matchMedia("(max-width: ".concat(r,"px)"));n.addEventListener("change",(function(e){var t=document.querySelectorAll(".menu__link");e.matches?t.forEach((function(e){return e.tabIndex=-1})):t.forEach((function(e){return e.tabIndex=0}))}));var a=new e(document.querySelector(".nav"),(function(e){e.classList.remove("menu_closed"),e.classList.add("menu_opened")}),(function(e){e.classList.remove("menu_opened"),e.classList.add("menu_closed")}));window.innerWidth<=r&&(a.events||a.addEvents()),n.addEventListener("change",(function(e){e.matches?a.events||a.addEvents():a.removeEvents()})),n.addEventListener("change",(function(e){e.matches||a.closePopup()}));var s,o=document.querySelectorAll(".menu__link");function c(e){e.classList.remove("search_opened"),e.classList.add("search_closed"),e.reset()}window.innerWidth<=r?o.forEach((function(e){return e.tabIndex=-1})):o.forEach((function(e){return e.tabIndex=0})),document.querySelector(".search__btn").addEventListener("click",(function(e){var t=document.querySelector(".search"),r=t.querySelector(".search__btn");t.classList.contains("search_closed")?(!function(e){e.classList.remove("search_closed"),e.classList.add("search_opened")}(t),r.setAttribute("aria-label","Закрыть"),r.setAttribute("aria-expanded","true")):(c(t),r.setAttribute("aria-label","Найти"),r.setAttribute("aria-expanded","false"))})),document.body.addEventListener("click",(function(e){var t=document.querySelector(".search");t.classList.contains("search_opened")&&!t.contains(e.target)&&c(t)})),(s=new JustValidate(".subscription-form")).addField("#subscription-email",[{rule:"required",errorMessage:"Укажите Ваш email"},{rule:"email",errorMessage:"Недопустимый формат"}]),(s=new JustValidate(".application-form")).addField("#name",[{rule:"required",errorMessage:"Укажите Ваше имя"},{rule:"customRegexp",value:/^\s*[а-яё]+([ -][а-яё]+)*\s*$/gi,errorMessage:"Недопустимый формат"}]),s.addField("#email",[{rule:"required",errorMessage:"Укажите Ваш email"},{rule:"email",errorMessage:"Недопустимый формат"}]);var i=document.querySelector(".map__contact-info");i.querySelector("#close-contacts-button").addEventListener("click",(function(e){i.classList.add("closed")})),ymaps.ready((function(){var e=getComputedStyle(document.body),t=parseInt(e.getPropertyValue("--breakpoint-s"));t=Number.isNaN(t)?650:t;var r=window.matchMedia("(max-width: ".concat(t,"px)")),n=parseInt(e.getPropertyValue("--breakpoint-m"));n=Number.isNaN(n)?800:n;var a=window.matchMedia("(max-width: ".concat(n,"px)")),s=[55.76031566,37.60600904],o=[55.76031566,37.61600904],c=[55.75931566,37.62050904],d=s;r.matches?d=c:a.matches&&(d=o);var u=new ymaps.Map("map",{center:d,zoom:13,controls:[]},{suppressMapOpenBlock:!0}),l=new ymaps.Placemark([55.76945557701307,37.63995866403161],{},{iconLayout:"default#image",iconImageHref:"./images/sprite.svg#marker",iconImageSize:[12,12]});l.events.add(["click"],(function(e){i.classList.remove("closed")})),u.geoObjects.add(l),a.addEventListener("change",(function(e){e.matches?u.setCenter(o):u.setCenter(s)})),r.addEventListener("change",(function(e){e.matches?u.setCenter(c):u.setCenter(o)}))}));import{clamp as d}from"./scripts/clamp.js";function u(e){var t=e.textContent;e.textContent="",e.style.setProperty("flex-grow",1),e.style.setProperty("max-height","none");var r=e.getBoundingClientRect().height;e.textContent=t,e.removeAttribute("style");var n=parseFloat(getComputedStyle(e).lineHeight),a=Math.floor(r/n)*n;e.style.setProperty("max-height","".concat(a,"px")),d(e,{clamp:"".concat(a,"px")})}var l=document.querySelectorAll(".project__description");l.forEach((function(e){return u(e)})),window.addEventListener("resize",(function(e){l.forEach((function(e){e.removeAttribute("style"),u(e)}))}));import{CurrentYear as m}from"./scripts/current-year.js";customElements.define("current-year",m);